-- Database dump generated by dump_db.py
-- Includes CREATE TABLE and INSERT statements for all tables

SET FOREIGN_KEY_CHECKS=0;

-- ---- alembic_version ----
CREATE TABLE `alembic_version` (
  `version_num` varchar(32) NOT NULL,
  PRIMARY KEY (`version_num`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `alembic_version` (`version_num`) VALUES
('d3df2a2d747b');

-- ---- rb_audit ----
CREATE TABLE `rb_audit` (
  `audit_id` bigint NOT NULL AUTO_INCREMENT,
  `event_id` varchar(36) NOT NULL,
  `tblname` varchar(64) NOT NULL,
  `row_id` bigint NOT NULL,
  `audit_date` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `action` enum('add','invite','register','login','edit','grant_module','revoke_module') NOT NULL,
  `actor_id` bigint DEFAULT NULL,
  `source` enum('self','admin','api') NOT NULL DEFAULT 'api',
  `prev_data` json DEFAULT NULL,
  `new_data` json DEFAULT NULL,
  PRIMARY KEY (`audit_id`),
  KEY `ix_rb_audit_event_id` (`event_id`)
) ENGINE=InnoDB AUTO_INCREMENT=48 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_audit` (`audit_id`, `event_id`, `tblname`, `row_id`, `audit_date`, `action`, `actor_id`, `source`, `prev_data`, `new_data`) VALUES
(2, '08f275b8-4a79-4dfa-9279-88db77e12126', 'rb_user', 2, '2025-12-26 07:28:09', 'add', 2, 'admin', 'null', '{"email": "ramu@rcpro.in", "status": "active", "is_admin": true}'),
(3, 'ae238e2a-b44e-4373-8f80-cc4bccad927a', 'rb_user', 2, '2025-12-26 07:28:42', 'login', 2, 'self', 'null', '{"at": "2025-12-26T07:28:42.045551", "email": "ramu@rcpro.in"}'),
(4, '2523b4a9-c970-4122-aad2-369941ca6394', 'rb_user_module', 2, '2025-12-26 07:28:51', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "cv"}'),
(5, '9b1c696d-7ec3-4397-8324-c679ef5e3065', 'rb_user', 3, '2025-12-26 07:29:12', 'invite', 2, 'admin', 'null', '{"email": "rampal3d@gmail.com", "status": "invited"}'),
(6, 'c1ee6786-7c42-493f-a2f5-e3d7dc39041f', 'rb_user', 3, '2025-12-26 07:29:28', 'register', 3, 'self', '{"status": "invited"}', '{"status": "active", "registered_at": "2025-12-26T07:29:27.779156"}'),
(7, 'b446c775-4ecb-4905-b783-d1adf69a84d8', 'rb_user', 3, '2025-12-26 07:30:55', 'login', 3, 'self', 'null', '{"at": "2025-12-26T07:30:54.842103", "email": "rampal3d@gmail.com"}'),
(8, '344e3c5a-9cc9-4958-97c0-935b55d03579', 'rb_user_profile', 3, '2025-12-26 07:31:01', 'edit', 3, 'self', '{"full_name": "Rampal Chauhan", "rgDisplay": "Rampal", "display_name": "Rampal"}', '{"full_name": "Rampal Chauhan", "rgDisplay": "Rampal", "display_name": "Rampal"}'),
(9, 'ab0b3363-60c6-4cd8-8664-482698c5d653', 'rb_user', 2, '2025-12-26 07:31:27', 'login', 2, 'self', 'null', '{"at": "2025-12-26T07:31:26.636431", "email": "ramu@rcpro.in"}'),
(10, 'eabd50ac-2c26-47d5-b69d-96bebd3b4535', 'rb_user_module', 3, '2025-12-26 07:31:34', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "chat"}'),
(11, '7bfa3f70-3dc6-457a-8613-b68402ab492d', 'rb_user_module', 3, '2025-12-26 07:31:34', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "cv"}'),
(12, '00e21ef3-5f1d-4653-afaf-23b82e439f59', 'rb_user_module', 3, '2025-12-26 07:31:34', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "social"}'),
(13, '7074f5eb-c730-4582-9672-ba8e874e922e', 'rb_user', 3, '2025-12-26 08:53:21', 'login', 3, 'self', 'null', '{"at": "2025-12-26T08:53:21.018393", "email": "rampal3d@gmail.com"}'),
(14, 'e23509c1-cfa8-4c77-8c96-dfa34baee4f6', 'rb_user', 2, '2025-12-26 09:33:15', 'login', 2, 'self', 'null', '{"at": "2025-12-26T09:33:15.248098", "email": "ramu@rcpro.in"}'),
(15, 'bfa3d8fd-0295-4d0c-8c5d-cd743c5fc1e0', 'rb_user', 4, '2025-12-26 10:09:15', 'invite', 2, 'admin', 'null', '{"email": "rampalxyz", "status": "invited"}'),
(16, '6c9fe892-e910-48f2-b3d9-3c0f80cb17f6', 'rb_user', 5, '2025-12-26 10:09:51', 'invite', 2, 'admin', 'null', '{"email": "rampalxyz@gmail.com", "status": "invited"}'),
(17, '89f313c1-dadc-45c3-9db0-a83c6ca261ac', 'rb_user', 5, '2025-12-26 10:10:07', 'register', 5, 'self', '{"status": "invited"}', '{"status": "active", "registered_at": "2025-12-26T10:10:07.133444"}'),
(18, '9962211d-0988-4053-899d-f130ffcf91fc', 'rb_user_module', 5, '2025-12-26 10:10:20', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "chat"}'),
(19, '63c90e67-5893-463c-95ac-41f09e6369a5', 'rb_user', 5, '2025-12-26 10:11:05', 'login', 5, 'self', 'null', '{"at": "2025-12-26T10:11:04.777468", "email": "rampalxyz@gmail.com"}'),
(20, 'c312e4aa-182f-4045-a626-baba30e720f3', 'rb_user', 5, '2025-12-26 11:43:35', 'login', 5, 'self', 'null', '{"at": "2025-12-26T11:43:35.141867", "email": "rampalxyz@gmail.com"}'),
(21, '4d9c9bd9-6029-4aae-beb4-6b1e4fe6c439', 'rb_user_module', 5, '2025-12-26 11:44:02', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "cv"}'),
(22, '65dd5b9b-a043-4129-a1f1-53e68b0599c1', 'rb_user_module', 5, '2025-12-26 11:44:02', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "social"}'),
(23, 'd14ad2dc-6500-4dbd-b137-e88eebefd19f', 'rb_user', 3, '2025-12-26 11:57:00', 'login', 3, 'self', 'null', '{"at": "2025-12-26T11:57:00.380936", "email": "rampal3d@gmail.com"}'),
(24, 'f7741dd6-2721-42db-871a-8fb2a99917dd', 'rb_user', 3, '2025-12-26 14:05:10', 'login', 3, 'self', 'null', '{"at": "2025-12-26T14:05:10.077362", "email": "rampal3d@gmail.com"}'),
(25, 'b40df991-fa03-40f2-b6f6-082f11f348fe', 'rb_user', 3, '2025-12-27 02:37:54', 'login', 3, 'self', 'null', '{"at": "2025-12-27T02:37:53.591043", "email": "rampal3d@gmail.com"}'),
(26, '2d769ad3-19c5-48ce-a6e4-06c60c984b59', 'rb_user', 5, '2025-12-27 07:41:14', 'login', 5, 'self', 'null', '{"at": "2025-12-27T07:41:13.662876", "email": "rampalxyz@gmail.com"}'),
(27, '1c7de137-c69a-4742-882e-1fd7b143120b', 'rb_user', 2, '2025-12-27 07:45:40', 'login', 2, 'self', 'null', '{"at": "2025-12-27T07:45:39.775408", "email": "ramu@rcpro.in"}'),
(28, 'aff17550-a09f-4518-80db-47b55530c079', 'rb_user', 6, '2025-12-27 07:48:17', 'invite', 2, 'admin', 'null', '{"email": "rscpmpro@gmail.com", "status": "invited"}'),
(29, 'f3219dd3-57d0-467d-9cee-3b81ed7f970b', 'rb_user', 6, '2025-12-27 07:49:11', 'register', 6, 'self', '{"status": "invited"}', '{"status": "active", "registered_at": "2025-12-27T07:49:10.626959"}'),
(30, 'd3bd65b3-f239-4ae1-91a3-bd5a1a011949', 'rb_user', 2, '2025-12-27 11:40:25', 'login', 2, 'self', 'null', '{"at": "2025-12-27T11:40:24.993278", "email": "ramu@rcpro.in"}'),
(31, 'e49f204c-c567-4353-9c0f-7e6f9a39ad02', 'rb_user', 2, '2025-12-27 11:40:38', 'login', 2, 'self', 'null', '{"at": "2025-12-27T11:40:37.707196", "email": "ramu@rcpro.in"}'),
(32, '1236b243-7267-4c7b-b5fd-482a2bc4aa2e', 'rb_user', 3, '2025-12-27 11:44:30', 'login', 3, 'self', 'null', '{"at": "2025-12-27T11:44:30.457299", "email": "rampal3d@gmail.com"}'),
(33, '543ebebc-be1f-4dc1-a94e-164122deb227', 'rb_user', 3, '2025-12-27 11:44:58', 'login', 3, 'self', 'null', '{"at": "2025-12-27T11:44:57.560386", "email": "rampal3d@gmail.com"}'),
(34, 'afa8bd96-c30c-4e68-8d35-f3f9a501c396', 'rb_user', 3, '2025-12-27 12:07:43', 'login', 3, 'self', 'null', '{"at": "2025-12-27T12:07:42.721478", "email": "rampal3d@gmail.com"}'),
(35, '684c1302-d97e-4743-863a-1a7f64465b2e', 'rb_user', 3, '2025-12-27 13:09:04', 'login', 3, 'self', 'null', '{"at": "2025-12-27T13:09:04.011424", "email": "rampal3d@gmail.com"}'),
(36, '21df3657-75af-431e-a3c0-035353580270', 'rb_user', 3, '2025-12-27 13:13:13', 'login', 3, 'self', 'null', '{"at": "2025-12-27T13:13:13.008105", "email": "rampal3d@gmail.com"}'),
(37, '17445fb0-4f68-44be-b1f9-8f1447482a69', 'rb_user', 3, '2025-12-27 13:31:02', 'login', 3, 'self', 'null', '{"at": "2025-12-27T13:31:02.378328", "email": "rampal3d@gmail.com"}'),
(38, 'baa6b987-6b89-4dad-90ae-b9508889abd9', 'rb_user', 3, '2025-12-27 13:36:57', 'login', 3, 'self', 'null', '{"at": "2025-12-27T13:36:57.389127", "email": "rampal3d@gmail.com"}'),
(39, 'ac9ddce5-1f5a-45f6-9555-3e03c710493f', 'rb_user', 3, '2025-12-27 13:38:57', 'login', 3, 'self', 'null', '{"at": "2025-12-27T13:38:56.584694", "email": "rampal3d@gmail.com"}'),
(40, '09a242eb-9359-4741-b099-ed4770ffd4da', 'rb_user_profile', 3, '2025-12-27 13:49:41', 'edit', 3, 'self', '{"full_name": "Rampal Chauhan", "rgDisplay": "Rampal", "display_name": "Rampal"}', '{"handle": "rcpro123", "full_name": "Rampal Chauhan", "rgDisplay": "Rampal", "display_name": "Rampal"}'),
(41, '325b828a-6400-49e0-9ea9-0c64596edb89', 'rb_user', 2, '2025-12-27 13:51:40', 'login', 2, 'self', 'null', '{"at": "2025-12-27T13:51:39.741212", "email": "ramu@rcpro.in"}'),
(42, 'a7de79a8-0cd7-44ce-9a76-d05643d47df1', 'rb_user', 3, '2025-12-27 14:03:54', 'login', 3, 'self', 'null', '{"at": "2025-12-27T14:03:54.351680", "email": "rampal3d@gmail.com"}'),
(43, '6e8781aa-3077-4aa8-b6f1-aafda92ab181', 'rb_user', 6, '2025-12-27 14:45:43', 'login', 6, 'self', 'null', '{"at": "2025-12-27T14:45:42.926420", "email": "rscpmpro@gmail.com"}'),
(44, 'e799b757-dee5-4a33-aeab-d44107063d76', 'rb_user', 2, '2025-12-27 14:46:06', 'login', 2, 'self', 'null', '{"at": "2025-12-27T14:46:05.676373", "email": "ramu@rcpro.in"}'),
(45, '789fabea-dab7-420e-8a1f-0ff5b774fc9c', 'rb_user_module', 6, '2025-12-27 14:46:13', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "chat"}'),
(46, 'c7bdbe58-bf16-40d5-bbb4-1f2c7ad36162', 'rb_user_module', 6, '2025-12-27 14:46:13', 'edit', 2, 'admin', 'null', '{"has_access": true, "module_key": "cv"}'),
(47, '8e1e15b5-30d9-495e-a172-1bd2f641bc8a', 'rb_user', 6, '2025-12-27 14:46:18', 'login', 6, 'self', 'null', '{"at": "2025-12-27T14:46:17.584217", "email": "rscpmpro@gmail.com"}');

-- ---- rb_chat_message ----
CREATE TABLE `rb_chat_message` (
  `message_id` bigint NOT NULL AUTO_INCREMENT,
  `thread_id` bigint NOT NULL,
  `sender_id` bigint NOT NULL,
  `body` text NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`message_id`),
  KEY `ix_chat_msg_thread_created` (`thread_id`,`created_at`),
  KEY `ix_chat_msg_sender` (`sender_id`),
  CONSTRAINT `fk_chat_msg_sender` FOREIGN KEY (`sender_id`) REFERENCES `rb_user` (`user_id`) ON DELETE RESTRICT,
  CONSTRAINT `fk_chat_msg_thread` FOREIGN KEY (`thread_id`) REFERENCES `rb_chat_thread` (`thread_id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_chat_message` (`message_id`, `thread_id`, `sender_id`, `body`, `created_at`) VALUES
(1, 1, 3, 'hi how r u', '2025-12-26 10:08:25'),
(2, 2, 3, 'hi how r u', '2025-12-26 10:11:16'),
(3, 2, 5, 'i am fine how r u', '2025-12-26 10:11:27'),
(4, 3, 3, 'this is project alpha chat', '2025-12-26 10:12:12'),
(5, 3, 5, 'this is message from me', '2025-12-26 10:12:22'),
(6, 2, 5, 'gom', '2025-12-27 07:41:21'),
(7, 2, 5, 'super', '2025-12-27 07:41:35'),
(8, 2, 3, 'too good', '2025-12-27 07:41:46'),
(9, 3, 3, 'i am done', '2025-12-27 07:42:32'),
(10, 3, 3, 'üòÄ', '2025-12-27 14:09:26'),
(11, 3, 3, 'üëç hi üôè', '2025-12-27 14:09:34'),
(12, 4, 6, 'Regarding%20your%20CV%3A%20Scrum%20master%20CV%20http%3A//127.0.0.1%3A5000/cvviewer/bsTDoMX7WpBXTeyuB0K9vsCLmxVnJCvxvitQ8fkPSy8', '2025-12-27 15:05:31'),
(13, 4, 6, 'Regarding%20your%20CV%3A%20Scrum%20master%20CV%20http%3A//127.0.0.1%3A5000/cvviewer/bsTDoMX7WpBXTeyuB0K9vsCLmxVnJCvxvitQ8fkPSy8', '2025-12-27 15:08:30'),
(14, 4, 6, 'Regarding%20your%20CV%3A%5CnScrum%20master%20CV%5Cnhttp%3A//127.0.0.1%3A5000/cvviewer/bsTDoMX7WpBXTeyuB0K9vsCLmxVnJCvxvitQ8fkPSy8', '2025-12-27 15:11:43'),
(15, 4, 6, 'Regarding%20your%20CV%3A%20Scrum%20master%20CV', '2025-12-27 15:13:58'),
(16, 4, 6, 'Regarding%20your%20CV%3A%5CnScrum%20master%20CV1', '2025-12-27 17:14:22');

-- ---- rb_chat_thread ----
CREATE TABLE `rb_chat_thread` (
  `thread_id` bigint NOT NULL AUTO_INCREMENT,
  `thread_type` enum('dm','group') NOT NULL DEFAULT 'dm',
  `name` varchar(120) DEFAULT NULL,
  `created_by` bigint NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`thread_id`),
  KEY `ix_chat_thread_type` (`thread_type`),
  KEY `ix_chat_thread_updated` (`updated_at`),
  KEY `fk_chat_thread_created_by` (`created_by`),
  CONSTRAINT `fk_chat_thread_created_by` FOREIGN KEY (`created_by`) REFERENCES `rb_user` (`user_id`) ON DELETE RESTRICT
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_chat_thread` (`thread_id`, `thread_type`, `name`, `created_by`, `created_at`, `updated_at`) VALUES
(1, 'dm', NULL, 3, '2025-12-26 10:08:19', '2025-12-26 10:08:25'),
(2, 'dm', NULL, 3, '2025-12-26 10:10:32', '2025-12-27 13:11:45'),
(3, 'group', 'Project Alpha', 3, '2025-12-26 10:12:01', '2025-12-27 19:39:33'),
(4, 'dm', NULL, 6, '2025-12-27 15:05:31', '2025-12-27 17:14:22');

-- ---- rb_chat_thread_member ----
CREATE TABLE `rb_chat_thread_member` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `thread_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `role` enum('owner','member') NOT NULL DEFAULT 'member',
  `joined_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uq_chat_thread_member` (`thread_id`,`user_id`),
  KEY `ix_chat_member_user` (`user_id`),
  KEY `ix_chat_member_thread` (`thread_id`),
  CONSTRAINT `fk_chat_member_thread` FOREIGN KEY (`thread_id`) REFERENCES `rb_chat_thread` (`thread_id`) ON DELETE CASCADE,
  CONSTRAINT `fk_chat_member_user` FOREIGN KEY (`user_id`) REFERENCES `rb_user` (`user_id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_chat_thread_member` (`id`, `thread_id`, `user_id`, `role`, `joined_at`) VALUES
(1, 1, 3, 'owner', '2025-12-26 10:08:19'),
(2, 1, 2, 'member', '2025-12-26 10:08:19'),
(3, 2, 3, 'owner', '2025-12-26 10:10:33'),
(4, 2, 5, 'member', '2025-12-26 10:10:33'),
(5, 3, 3, 'owner', '2025-12-26 10:12:01'),
(6, 3, 2, 'member', '2025-12-26 10:12:01'),
(7, 3, 5, 'member', '2025-12-26 10:12:01'),
(8, 4, 6, 'owner', '2025-12-27 15:05:31'),
(9, 4, 3, 'member', '2025-12-27 15:05:31');

-- ---- rb_cv_file ----
CREATE TABLE `rb_cv_file` (
  `cvfile_id` bigint NOT NULL AUTO_INCREMENT,
  `owner_user_id` bigint NOT NULL,
  `cv_name` varchar(200) NOT NULL DEFAULT '',
  `cover_letter` text,
  `job_pref` text,
  `cover_letter_path` varchar(500) DEFAULT NULL,
  `cover_letter_name` varchar(255) DEFAULT NULL,
  `cover_letter_mime` varchar(100) DEFAULT NULL,
  `cover_letter_size` bigint DEFAULT NULL,
  `original_filename` varchar(255) NOT NULL DEFAULT '',
  `stored_path` varchar(500) NOT NULL DEFAULT '',
  `mime_type` varchar(100) NOT NULL DEFAULT 'application/pdf',
  `size_bytes` bigint NOT NULL DEFAULT '0',
  `is_archived` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`cvfile_id`),
  KEY `idx_rb_cv_file_owner` (`owner_user_id`),
  KEY `idx_rb_cv_file_arch` (`is_archived`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_cv_file` (`cvfile_id`, `owner_user_id`, `cv_name`, `cover_letter`, `job_pref`, `cover_letter_path`, `cover_letter_name`, `cover_letter_mime`, `cover_letter_size`, `original_filename`, `stored_path`, `mime_type`, `size_bytes`, `is_archived`, `created_at`, `updated_at`) VALUES
(1, 3, 'my CV', NULL, NULL, NULL, NULL, NULL, NULL, 'RampalChauhanCV2021.pdf', 'C:\\Users\\Hp\\Dropbox\\AppDev\\uploads\\cv\\3\\20251227051511_RampalChauhanCV2021.pdf', 'application/pdf', 209957, 0, '2025-12-27 05:15:12', '2025-12-27 05:15:12'),
(2, 3, 'Scrum master CV1', NULL, 'Location: Noida; Mode: Remote; City: Noida; Available from: 2025-12-27; Hours/day: 3', 'C:\\Users\\Hp\\Dropbox\\AppDev\\uploads\\cv\\3\\cover_20251227164626_coverletter.pdf', 'coverletter.pdf', 'application/pdf', 61975, 'RampalChauhanCV2021.pdf', 'C:\\Users\\Hp\\Dropbox\\AppDev\\uploads\\cv\\3\\20251227164640_RampalChauhanCV2021.pdf', 'application/pdf', 209957, 0, '2025-12-27 14:44:47', '2025-12-27 16:50:09');

-- ---- rb_cv_pair ----
CREATE TABLE `rb_cv_pair` (
  `cv_id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `v_name` varchar(120) NOT NULL DEFAULT '',
  `v_company` varchar(120) NOT NULL DEFAULT '',
  `v_email` varchar(120) NOT NULL DEFAULT '',
  `v_phone` varchar(50) NOT NULL DEFAULT '',
  `v_primary_skill` varchar(120) NOT NULL DEFAULT '',
  `v_skill_description` text NOT NULL,
  `v_organizations` varchar(255) NOT NULL DEFAULT '',
  `v_achievements` varchar(255) NOT NULL DEFAULT '',
  `op_name` varchar(120) NOT NULL DEFAULT '',
  `op_email` varchar(120) NOT NULL DEFAULT '',
  `op_phone` varchar(50) NOT NULL DEFAULT '',
  `op_title` varchar(150) NOT NULL DEFAULT '',
  `op_linkedin_url` varchar(255) NOT NULL DEFAULT '',
  `op_website_url` varchar(255) NOT NULL DEFAULT '',
  `op_about` text NOT NULL,
  `op_skills` text NOT NULL,
  `op_experience` text NOT NULL,
  `op_academic` text NOT NULL,
  `op_achievements` text NOT NULL,
  `op_final_remark` text NOT NULL,
  `onepage_html` text NOT NULL,
  `is_archived` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`cv_id`),
  KEY `idx_cv_user` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_cv_pair` (`cv_id`, `user_id`, `v_name`, `v_company`, `v_email`, `v_phone`, `v_primary_skill`, `v_skill_description`, `v_organizations`, `v_achievements`, `op_name`, `op_email`, `op_phone`, `op_title`, `op_linkedin_url`, `op_website_url`, `op_about`, `op_skills`, `op_experience`, `op_academic`, `op_achievements`, `op_final_remark`, `onepage_html`, `is_archived`, `created_at`, `updated_at`) VALUES
(1, 3, 'Rampal Chauhan', 'RayGrow Consulting', 'rampal3d@gmail.com', '9667109271', 'Project Management', 'Agile Project Management
Scrum Magement', 'Indias Top 3 IT Consultancy', '', '', '', '', '', '', '', '', '', '', '', '', '', '<div>
  <div class="mb-2">
    <h4 class="mb-0">Rampal Chauhan</h4>
    <div class="text-muted">
      RayGrow Consulting
       ‚Ä¢ 
      rampal3d@gmail.com
       ‚Ä¢ 
      9667109271
    </div>
  </div>

  <hr>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Primary Skill</h6>
    <div><b>Project Management</b></div>
    
      <div class="mt-1">Agile Project Management
Scrum Magement</div>
    
  </div>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Organizations</h6>
    <div>Indias Top 3 IT Consultancy</div>
  </div>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Achievements</h6>
    <div>-</div>
  </div>
</div>', 0, '2025-12-26 11:22:15', '2025-12-26 11:24:24'),
(2, 3, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '<div>
  <div class="mb-2">
    <h4 class="mb-0">Unnamed</h4>
    
    <div class="text-muted mt-1">
      
      
      
    </div>

    <div class="mt-1">
      
      
    </div>
  </div>

  <hr>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">About</h6>
    <div>-</div>
  </div>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Skills</h6>
    <div>-</div>
  </div>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Experience</h6>
    <div>-</div>
  </div>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Academic</h6>
    <div>-</div>
  </div>

  <div class="mb-3">
    <h6 class="text-uppercase text-muted mb-1">Achievements</h6>
    <div>-</div>
  </div>

  <div class="mb-0">
    <h6 class="text-uppercase text-muted mb-1">Final Remark</h6>
    <div>-</div>
  </div>
</div>', 0, '2025-12-26 11:44:25', '2025-12-26 11:44:25');

-- ---- rb_cv_public_link ----
CREATE TABLE `rb_cv_public_link` (
  `link_id` bigint NOT NULL AUTO_INCREMENT,
  `cvfile_id` bigint NOT NULL,
  `created_by` bigint NOT NULL,
  `share_type` enum('public','user','email') NOT NULL DEFAULT 'public',
  `target` varchar(320) DEFAULT NULL,
  `name` varchar(150) DEFAULT NULL,
  `token` varchar(64) NOT NULL,
  `allow_download` tinyint(1) NOT NULL DEFAULT '0',
  `password_hash` varchar(255) DEFAULT NULL,
  `status` enum('active','disabled') NOT NULL DEFAULT 'active',
  `expires_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`link_id`),
  UNIQUE KEY `uq_cv_public_token` (`token`),
  KEY `idx_cv_public_cv` (`cvfile_id`),
  KEY `idx_cv_public_creator` (`created_by`),
  CONSTRAINT `fk_cv_public_cv` FOREIGN KEY (`cvfile_id`) REFERENCES `rb_cv_file` (`cvfile_id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_cv_public_link` (`link_id`, `cvfile_id`, `created_by`, `share_type`, `target`, `name`, `token`, `allow_download`, `password_hash`, `status`, `expires_at`, `created_at`) VALUES
(1, 2, 3, 'public', NULL, NULL, 'g-g6l2rz3N1hMPcHixrViPPBUacNvo_NUIVPiXg-Dww', 0, 'scrypt:32768:8:1$HE6QyjN8qLzbD3bn$4654580ae8feb2d40be09fd09f54f67ef0374eeca688ffe77c41c59690124ee5b55897ebfc90311e6616e93cbb10fe13f92f82cb7095313618600e964cb21ce6', 'active', NULL, '2025-12-27 17:06:11'),
(2, 2, 3, 'public', NULL, NULL, 'rD7ZJzcclKKqSaEMG0Gb12wePLKjH9LghgcYJfKzDqQ', 0, 'scrypt:32768:8:1$SuuNhUyIwCgiSOEe$eeffa394714e8ff244a4e065d0a8d883861d2c3e2abc49569e63c1bb61f12a940d3659c6ccb395e0326f3de49880a3e884ec01ea9740fbd5eb4ffe40e56f27c4', 'active', NULL, '2025-12-27 17:07:26');

-- ---- rb_cv_share ----
CREATE TABLE `rb_cv_share` (
  `share_id` bigint NOT NULL AUTO_INCREMENT,
  `cv_id` bigint NOT NULL,
  `owner_user_id` bigint NOT NULL,
  `target_user_id` bigint DEFAULT NULL,
  `target_email` varchar(200) DEFAULT NULL,
  `share_token` varchar(64) NOT NULL,
  `is_public` tinyint(1) NOT NULL DEFAULT '0',
  `is_archived` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`share_id`),
  UNIQUE KEY `uk_share_token` (`share_token`),
  KEY `idx_share_cv` (`cv_id`),
  KEY `idx_share_owner` (`owner_user_id`),
  KEY `idx_share_target_user` (`target_user_id`),
  KEY `idx_share_target_email` (`target_email`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_cv_share` (`share_id`, `cv_id`, `owner_user_id`, `target_user_id`, `target_email`, `share_token`, `is_public`, `is_archived`, `created_at`) VALUES
(1, 1, 3, NULL, NULL, 'f0Go72R8RlGHD_FbeNAPUKEmMeezoInDqiqml6_yWXM', 1, 0, '2025-12-26 11:42:32'),
(2, 1, 3, 5, NULL, 'F5XsMwiHEQMrPjb10fGOgtnSiFJbRmQDofmmBymfuk8', 0, 0, '2025-12-26 11:42:58'),
(3, 1, 3, NULL, 'rampal3d@gmail.com', '66_-qjnmlq3QUAIJr7MA4c73eTYHeXp7wdeCW2gTEm8', 0, 0, '2025-12-26 11:43:06');

-- ---- rb_cvfile_share ----
CREATE TABLE `rb_cvfile_share` (
  `share_id` bigint NOT NULL AUTO_INCREMENT,
  `cvfile_id` bigint NOT NULL,
  `owner_user_id` bigint NOT NULL,
  `target_user_id` bigint DEFAULT NULL,
  `target_email` varchar(200) DEFAULT NULL,
  `share_token` varchar(64) NOT NULL,
  `is_public` tinyint(1) NOT NULL DEFAULT '0',
  `is_archived` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`share_id`),
  UNIQUE KEY `uq_rb_cvfile_share_token` (`share_token`),
  KEY `idx_rb_cvfile_share_cvfile` (`cvfile_id`),
  KEY `idx_rb_cvfile_share_owner` (`owner_user_id`),
  KEY `idx_rb_cvfile_share_target_user` (`target_user_id`),
  KEY `idx_rb_cvfile_share_target_email` (`target_email`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_cvfile_share` (`share_id`, `cvfile_id`, `owner_user_id`, `target_user_id`, `target_email`, `share_token`, `is_public`, `is_archived`, `created_at`) VALUES
(1, 1, 3, NULL, NULL, 'Mp1u-yV3Qf6pBcJV1UKVLCKcSWcXK0Faa-eQbMX6Z1I', 1, 0, '2025-12-27 05:15:19'),
(2, 2, 3, 6, NULL, 'bsTDoMX7WpBXTeyuB0K9vsCLmxVnJCvxvitQ8fkPSy8', 0, 0, '2025-12-27 14:45:20');

-- ---- rb_invitation ----
CREATE TABLE `rb_invitation` (
  `invitation_id` bigint NOT NULL AUTO_INCREMENT,
  `email` varchar(320) NOT NULL,
  `token` varchar(255) NOT NULL,
  `expires_at` datetime NOT NULL,
  `used` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`invitation_id`),
  UNIQUE KEY `uq_invite_token` (`token`),
  KEY `ix_invite_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ---- rb_module ----
CREATE TABLE `rb_module` (
  `module_key` varchar(50) NOT NULL,
  `name` varchar(120) NOT NULL,
  `description` varchar(255) DEFAULT NULL,
  `is_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`module_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_module` (`module_key`, `name`, `description`, `is_enabled`, `created_at`, `updated_at`) VALUES
('chat', 'Chat Module', 'Chat features', 1, '2025-12-26 12:55:33', '2025-12-26 12:55:33'),
('cv', 'CV Module', 'Create and manage professional CVs', 1, '2025-12-26 12:55:33', '2025-12-26 12:55:33'),
('social', 'Social Media Module', 'Social networking features', 1, '2025-12-26 12:55:33', '2025-12-26 12:55:33');

-- ---- rb_password_reset ----
CREATE TABLE `rb_password_reset` (
  `reset_id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `token` varchar(255) NOT NULL,
  `expires_at` datetime NOT NULL,
  `used` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`reset_id`),
  UNIQUE KEY `uq_reset_token` (`token`),
  KEY `fk_reset_user` (`user_id`),
  CONSTRAINT `fk_reset_user` FOREIGN KEY (`user_id`) REFERENCES `rb_user` (`user_id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ---- rb_schema_migrations ----
CREATE TABLE `rb_schema_migrations` (
  `filename` varchar(255) NOT NULL,
  `applied_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`filename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_schema_migrations` (`filename`, `applied_at`) VALUES
('0001_baseline.sql', '2025-12-26 11:40:41');

-- ---- rb_social_like ----
CREATE TABLE `rb_social_like` (
  `like_id` bigint NOT NULL AUTO_INCREMENT,
  `post_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`like_id`),
  UNIQUE KEY `uq_social_like` (`post_id`,`user_id`),
  KEY `idx_social_like_post` (`post_id`),
  KEY `idx_social_like_user` (`user_id`),
  CONSTRAINT `fk_social_like_post` FOREIGN KEY (`post_id`) REFERENCES `rb_social_post` (`post_id`) ON DELETE CASCADE,
  CONSTRAINT `fk_social_like_user` FOREIGN KEY (`user_id`) REFERENCES `rb_user` (`user_id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_social_like` (`like_id`, `post_id`, `user_id`, `created_at`) VALUES
(1, 1, 3, '2025-12-27 16:10:02');

-- ---- rb_social_post ----
CREATE TABLE `rb_social_post` (
  `post_id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `parent_id` bigint DEFAULT NULL,
  `body` text NOT NULL,
  `image_path` varchar(500) DEFAULT NULL,
  `cvfile_id` bigint DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`post_id`),
  KEY `ix_social_user` (`user_id`),
  KEY `ix_social_parent` (`parent_id`),
  KEY `ix_social_root` (`parent_id`,`created_at`),
  KEY `ix_social_cvfile` (`cvfile_id`),
  CONSTRAINT `fk_social_parent` FOREIGN KEY (`parent_id`) REFERENCES `rb_social_post` (`post_id`) ON DELETE CASCADE,
  CONSTRAINT `fk_social_user` FOREIGN KEY (`user_id`) REFERENCES `rb_user` (`user_id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_social_post` (`post_id`, `user_id`, `parent_id`, `body`, `image_path`, `cvfile_id`, `created_at`) VALUES
(1, 3, NULL, 'hi guys i am looking for job. please help me.', NULL, NULL, '2025-12-27 13:04:41'),
(2, 3, 1, 'hi i am can help', NULL, NULL, '2025-12-27 13:06:29');

-- ---- rb_user ----
CREATE TABLE `rb_user` (
  `user_id` bigint NOT NULL AUTO_INCREMENT,
  `email` varchar(320) NOT NULL,
  `password_hash` varchar(255) DEFAULT NULL,
  `status` enum('invited','active','blocked','deleted') NOT NULL DEFAULT 'invited',
  `is_admin` tinyint(1) NOT NULL DEFAULT '0',
  `invited_at` datetime DEFAULT NULL,
  `invited_by` bigint DEFAULT NULL,
  `registered_at` datetime DEFAULT NULL,
  `last_login_at` datetime DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `uq_rb_user_email` (`email`),
  KEY `ix_rb_user_email` (`email`),
  KEY `ix_rb_user_status` (`status`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_user` (`user_id`, `email`, `password_hash`, `status`, `is_admin`, `invited_at`, `invited_by`, `registered_at`, `last_login_at`, `created_at`, `updated_at`) VALUES
(2, 'ramu@rcpro.in', '$2b$12$LBsdnXWGHSd9qHEX2rqM4.c7vRNbNZFjf2mUroSfNACr4lC5LvnJy', 'active', 1, '2025-12-26 07:28:09', NULL, '2025-12-26 07:28:09', '2025-12-27 14:46:06', '2025-12-26 07:28:09', '2025-12-27 14:46:06'),
(3, 'rampal3d@gmail.com', '$2b$12$uBL1oT.v1LrHugL4yQKuN.re/05pOhB3Vm/ANj/JLTuDDRJgrQnea', 'active', 0, '2025-12-26 07:29:12', 2, '2025-12-26 07:29:28', '2025-12-27 14:03:54', '2025-12-26 07:29:12', '2025-12-27 14:03:54'),
(4, 'rampalxyz', '', 'invited', 0, '2025-12-26 10:09:15', 2, NULL, NULL, '2025-12-26 10:09:15', '2025-12-26 10:09:15'),
(5, 'rampalxyz@gmail.com', '$2b$12$m.saFjJbQr7dJgp564FhoumbqKkod0QaHe7Hy98fKqu/kj5HJ0gtG', 'active', 0, '2025-12-26 10:09:51', 2, '2025-12-26 10:10:07', '2025-12-27 07:41:14', '2025-12-26 10:09:51', '2025-12-27 07:41:14'),
(6, 'rscpmpro@gmail.com', '$2b$12$1rG9VpLnJpuyvIkjZpDrteeANa8M3lU4c1U64Omr.kGMW1hbGX.9W', 'active', 0, '2025-12-27 07:48:17', 2, '2025-12-27 07:49:11', '2025-12-27 14:46:18', '2025-12-27 07:48:17', '2025-12-27 14:46:18');

-- ---- rb_user_module ----
CREATE TABLE `rb_user_module` (
  `user_id` bigint NOT NULL,
  `module_key` varchar(50) NOT NULL,
  `has_access` tinyint(1) NOT NULL DEFAULT '1',
  `granted_by` bigint DEFAULT NULL,
  `granted_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`user_id`,`module_key`),
  KEY `fk_um_module` (`module_key`),
  CONSTRAINT `fk_um_module` FOREIGN KEY (`module_key`) REFERENCES `rb_module` (`module_key`) ON DELETE CASCADE,
  CONSTRAINT `fk_um_user` FOREIGN KEY (`user_id`) REFERENCES `rb_user` (`user_id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_user_module` (`user_id`, `module_key`, `has_access`, `granted_by`, `granted_at`) VALUES
(2, 'cv', 1, 2, '2025-12-26 07:28:51'),
(2, 'social', 1, NULL, '2025-12-27 13:51:40'),
(3, 'chat', 1, 2, '2025-12-26 07:31:34'),
(3, 'cv', 1, 2, '2025-12-26 07:31:34'),
(3, 'social', 1, 2, '2025-12-26 07:31:34'),
(5, 'chat', 1, 2, '2025-12-26 10:10:20'),
(5, 'cv', 1, 2, '2025-12-26 11:44:02'),
(5, 'social', 1, 2, '2025-12-26 11:44:02'),
(6, 'chat', 1, 2, '2025-12-27 14:46:13'),
(6, 'cv', 1, 2, '2025-12-27 14:46:13'),
(6, 'social', 1, NULL, '2025-12-27 14:45:43');

-- ---- rb_user_profile ----
CREATE TABLE `rb_user_profile` (
  `user_id` bigint NOT NULL,
  `handle` varchar(64) DEFAULT NULL,
  `rgDisplay` varchar(200) NOT NULL,
  `full_name` varchar(200) DEFAULT NULL,
  `display_name` varchar(120) DEFAULT NULL,
  `rgData` json DEFAULT NULL,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `handle` (`handle`),
  UNIQUE KEY `uq_rb_profile_handle` (`handle`),
  CONSTRAINT `fk_profile_user` FOREIGN KEY (`user_id`) REFERENCES `rb_user` (`user_id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_user_profile` (`user_id`, `handle`, `rgDisplay`, `full_name`, `display_name`, `rgData`, `updated_at`) VALUES
(2, 'Admin', 'Admin', 'Rampal Admin', 'Admin', '{}', '2025-12-27 19:27:47'),
(3, 'rcpro123', 'Rampal', 'Rampal Chauhan', 'Rampal', '{}', '2025-12-27 13:49:41'),
(4, 'rampalxyz', 'rampalxyz', NULL, NULL, '{}', '2025-12-27 19:27:47'),
(5, 'James', 'James', 'James Bond', 'James', '{}', '2025-12-27 19:27:47'),
(6, 'rcPMP', 'rcPMP', 'ram PMP', 'rcPMP', '{}', '2025-12-27 19:27:47');

-- ---- rb_vcard ----
CREATE TABLE `rb_vcard` (
  `vcard_id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `name` varchar(150) NOT NULL DEFAULT '',
  `email` varchar(150) NOT NULL DEFAULT '',
  `phone` varchar(60) NOT NULL DEFAULT '',
  `linkedin_url` varchar(255) NOT NULL DEFAULT '',
  `tagline` varchar(255) NOT NULL DEFAULT '',
  `location` varchar(150) DEFAULT NULL,
  `work_mode` varchar(20) DEFAULT NULL,
  `city` varchar(120) DEFAULT NULL,
  `available_from` date DEFAULT NULL,
  `hours_per_day` int DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`vcard_id`),
  UNIQUE KEY `uq_rb_vcard_user` (`user_id`),
  KEY `idx_rb_vcard_user` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_vcard` (`vcard_id`, `user_id`, `name`, `email`, `phone`, `linkedin_url`, `tagline`, `location`, `work_mode`, `city`, `available_from`, `hours_per_day`, `created_at`, `updated_at`) VALUES
(1, 3, 'Rampal', 'rampal3d@gmail.com', '', 'linked in', 'i am agile project manager', 'Noida', 'remote', 'Noida', '2025-12-27', 3, '2025-12-27 02:37:55', '2025-12-27 16:24:01'),
(2, 2, '', '', '', '', '', NULL, NULL, NULL, NULL, NULL, '2025-12-27 13:57:58', '2025-12-27 13:57:58'),
(3, 6, '', '', '', '', '', NULL, NULL, NULL, NULL, NULL, '2025-12-27 14:46:19', '2025-12-27 14:46:19');

-- ---- rb_vcard_item ----
CREATE TABLE `rb_vcard_item` (
  `item_id` bigint NOT NULL AUTO_INCREMENT,
  `vcard_id` bigint NOT NULL,
  `item_type` varchar(20) NOT NULL,
  `title` varchar(150) NOT NULL DEFAULT '',
  `description` text NOT NULL,
  `experience` text NOT NULL,
  `sort_order` int NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`item_id`),
  KEY `idx_rb_vcard_item_vcard` (`vcard_id`),
  KEY `idx_rb_vcard_item_type` (`item_type`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `rb_vcard_item` (`item_id`, `vcard_id`, `item_type`, `title`, `description`, `experience`, `sort_order`, `created_at`) VALUES
(2, 1, 'skill', 'Project Management', 'Manage Project Water Flow and Agile', '12', 0, '2025-12-27 16:24:01');

-- ---- rb_vcard_share ----
CREATE TABLE `rb_vcard_share` (
  `share_id` bigint NOT NULL AUTO_INCREMENT,
  `vcard_id` bigint NOT NULL,
  `owner_user_id` bigint NOT NULL,
  `target_user_id` bigint DEFAULT NULL,
  `target_email` varchar(200) DEFAULT NULL,
  `share_token` varchar(64) NOT NULL,
  `is_public` tinyint(1) NOT NULL DEFAULT '0',
  `is_archived` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`share_id`),
  UNIQUE KEY `uq_rb_vcard_share_token` (`share_token`),
  KEY `idx_rb_vcard_share_vcard` (`vcard_id`),
  KEY `idx_rb_vcard_share_owner` (`owner_user_id`),
  KEY `idx_rb_vcard_share_target_user` (`target_user_id`),
  KEY `idx_rb_vcard_share_target_email` (`target_email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

SET FOREIGN_KEY_CHECKS=1;

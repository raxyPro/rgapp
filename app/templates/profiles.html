{% extends "layout.html" %}
{% block content %}

{% set is_view = pageaction is none or pageaction == 'view' %}
{% set is_edit = pageaction == 'edit' %}

<link rel="stylesheet" href="{{ url_for('static', filename='icard.css') }}">

<div class="container mx-auto px-4 py-6">

    <!-- Toggle buttons -->
    <div class="flex justify-end space-x-2 mb-6">
        <a href="{{ url_for('prof.profiles', pageaction='view') }}"
            class="px-4 py-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 {% if is_view %}opacity-50{% endif %}">
            View
        </a>
        <a href="{{ url_for('prof.profiles', pageaction='edit') }}"
            class="px-4 py-2 rounded-md bg-yellow-500 text-white hover:bg-yellow-600 {% if is_edit %}opacity-50{% endif %}">
            Edit
        </a>
    </div>

    <!-- VIEW MODE -->
    {% if is_view %}

    <div id="view_mode">
        <div class="card-container">
            <div class="d-flex justify-content-between align-items-center mb-3"
                style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2>{{ icard_dict.name }}</h2>
                    <p class="text-secondary">{{ icard_dict.Role }}</p>
                    <p class="text-secondary" style="margin-left: -2px;">{{ icard_dict.organization }}</p>
                </div>
                <div class="card-header text-end">
                    <img src="{{ url_for('static', filename='logo.png') }}" alt="RayGrow Logo"
                        style="height: 50px; margin-bottom: 5px;">

                    <div class="tagline">We Connect and Deliver</div>
                </div>
            </div>

            <div class="contact mb-4">
                <p><strong>M:</strong> {{ icard_dict.mobile }}&nbsp;&nbsp;
                    <strong>T:</strong> {{ icard_dict.Telephone }}
                </p>
                <p><strong>E:</strong>
                    <a href="mailto:{{ icard_dict.email }}">{{ icard_dict.email }}</a>
                </p>
            </div>

            {% if icard_dict.Services %}
            <div class="mb-2" style="line-height:1.5;">
                <p class="mb-1">
                    <span class="category">Services</span>:
                </p>
                <ul>
                    {% for service in icard_dict.Services %}
                    <li>{{ service }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if icard_dict.website %}
            <div class="text-center mt-4" style="text-align: center;">
                <small class="text-secondary">{{ icard_dict.website }}</small>
            </div>
            {% endif %}
        </div>
    </div>
    {{icard_dict}}

    {% endif %}

    <!-- EDIT MODE -->

    {% if is_edit %}
    <div id="edit_mode">


        <form method="post" action="{{ url_for('prof.save_prof') }}">
            <div class="mb-4">
                <label for="pf_name" class="form-label">Name</label>
                <input type="text" id="pf_name" name="pf_name" value="{{ profile.pf_name|default('') }}"
                    class="form-input" required>
            </div>
            <div class="mb-4">
                <label for="pf_email" class="form-label">Email</label>
                <input type="email" id="pf_email" name="pf_email" value="{{ profile.pf_email|default('') }}"
                    class="form-input" required>
            </div>
            <div class="mb-4">
                <label for="pf_title" class="form-label">Title</label>
                <input type="text" id="pf_title" name="pf_title" value="{{ profile.pf_title|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_company" class="form-label">Company</label>
                <input type="text" id="pf_company" name="pf_company" value="{{ profile.pf_company|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_mobile" class="form-label">Mobile</label>
                <input type="text" id="pf_mobile" name="pf_mobile" value="{{ profile.pf_mobile|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_email2" class="form-label">Alternate Email</label>
                <input type="email" id="pf_email2" name="pf_email2" value="{{ profile.pf_email2|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_skill1" class="form-label">Top Skill 1</label>
                <input type="text" id="pf_skill1" name="pf_skill1" value="{{ profile.pf_skill1|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_skill2" class="form-label">Top Skill 2</label>
                <input type="text" id="pf_skill2" name="pf_skill2" value="{{ profile.pf_skill2|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_skill3" class="form-label">Top Skill 3</label>
                <input type="text" id="pf_skill3" name="pf_skill3" value="{{ profile.pf_skill3|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_service1" class="form-label">Top Service 1</label>
                <input type="text" id="pf_service1" name="pf_service1" value="{{ profile.pf_service1|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_service2" class="form-label">Top Service 2</label>
                <input type="text" id="pf_service2" name="pf_service2" value="{{ profile.pf_service2|default('') }}"
                    class="form-input">
            </div>
            <div class="mb-4">
                <label for="pf_service3" class="form-label">Top Service 3</label>
                <input type="text" id="pf_service3" name="pf_service3" value="{{ profile.pf_service3|default('') }}"
                    class="form-input">
            </div>
            <div class="flex flex-wrap gap-2 mt-4">
                <button type="submit"
                    class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300">
                    Save
                </button>
                <a href="/profile"
                    class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition duration-300">
                    Cancel
                </a>
            </div>
        </form>

    </div>


    {% endif %}

</div>
{% endblock %}